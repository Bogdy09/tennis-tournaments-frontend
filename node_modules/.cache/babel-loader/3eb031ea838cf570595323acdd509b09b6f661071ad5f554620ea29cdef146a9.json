{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lazab\\\\tennis-tournaments11\\\\tennis-tournaments\\\\client\\\\src\\\\pages\\\\EditTournament.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { useParams, useNavigate, useLocation } from \"react-router-dom\";\nimport axios from \"axios\"; // Add this import\n//import { TournamentContext } from \"../context/TournamentContext.js\";\nimport { updateTournament } from \"../api.js\";\n\n// Define API_URL (best practice: use environment variable)\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000/api/tournaments\";\nexport default function EditTournament({\n  isOnline,\n  serverAvailable\n}) {\n  _s();\n  var _location$state2;\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  //const { tournaments, updateTournament } = useContext(TournamentContext);\n  const [loading, setLoading] = useState(true); // Add loading state\n  const [error, setError] = useState(null);\n\n  // Initialize form with either location state or empty values\n  const [formData, setFormData] = useState({\n    name: \"\",\n    location: \"\",\n    date: \"\",\n    prize: \"\",\n    favoritePlayerId: \"\"\n  });\n  useEffect(() => {\n    const loadTournament = async () => {\n      setLoading(true);\n      try {\n        var _location$state;\n        // Try location state first\n        if ((_location$state = location.state) !== null && _location$state !== void 0 && _location$state.tournament) {\n          setFormData(location.state.tournament);\n          return;\n        }\n\n        // Fallback to context\n        const response = await axios.get(`${API_URL}/${id}`);\n        setFormData(response.data);\n      } catch (error) {\n        console.error(\"Failed to load tournament:\", error);\n        setError(error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadTournament();\n  }, [id, location.state]);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading tournament data...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 25\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"Error loading tournament: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 23\n  }, this);\n  if (!formData.id) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Tournament not found\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 30\n  }, this);\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    await updateTournament(Number(id), formData, isOnline, serverAvailable);\n    navigate(\"/\");\n  };\n\n  // Show loading only if we have no data at all\n  if (!formData.name && !((_location$state2 = location.state) !== null && _location$state2 !== void 0 && _location$state2.tournament)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading tournament data...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: \"600px\",\n      margin: \"0 auto\",\n      padding: \"20px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Edit Tournament\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Name\",\n        name: \"name\",\n        value: formData.name,\n        onChange: handleChange\n        //required\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Location\",\n        name: \"location\",\n        value: formData.location,\n        onChange: handleChange\n        //required\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"date\",\n        name: \"date\",\n        value: formData.date,\n        onChange: handleChange\n        //required\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Prize\",\n        name: \"prize\",\n        value: formData.prize,\n        onChange: handleChange\n        //required\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Favorite Player\",\n        name: \"favoritePlayerId\",\n        value: formData.favoritePlayer,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Save Changes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 9\n  }, this);\n}\n_s(EditTournament, \"DQOzi66P3V/Se1lqDgIaBpNf+NM=\", false, function () {\n  return [useParams, useNavigate, useLocation];\n});\n_c = EditTournament;\nvar _c;\n$RefreshReg$(_c, \"EditTournament\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useParams","useNavigate","useLocation","axios","updateTournament","jsxDEV","_jsxDEV","API_URL","process","env","REACT_APP_API_URL","EditTournament","isOnline","serverAvailable","_s","_location$state2","id","navigate","location","loading","setLoading","error","setError","formData","setFormData","name","date","prize","favoritePlayerId","loadTournament","_location$state","state","tournament","response","get","data","console","message","children","fileName","_jsxFileName","lineNumber","columnNumber","handleChange","e","target","value","handleSubmit","preventDefault","Number","style","maxWidth","margin","padding","onSubmit","type","placeholder","onChange","favoritePlayer","_c","$RefreshReg$"],"sources":["C:/Users/lazab/tennis-tournaments11/tennis-tournaments/client/src/pages/EditTournament.js"],"sourcesContent":["\r\nimport React, { useState, useEffect, useContext } from \"react\";\r\nimport { useParams, useNavigate, useLocation } from \"react-router-dom\";\r\nimport axios from \"axios\"; // Add this import\r\n//import { TournamentContext } from \"../context/TournamentContext.js\";\r\nimport { updateTournament } from \"../api.js\"; \r\n\r\n\r\n// Define API_URL (best practice: use environment variable)\r\nconst API_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000/api/tournaments\";\r\n\r\nexport default function EditTournament({ isOnline, serverAvailable }) {\r\n    const { id } = useParams();\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    //const { tournaments, updateTournament } = useContext(TournamentContext);\r\n    const [loading, setLoading] = useState(true); // Add loading state\r\n    const [error, setError] = useState(null);\r\n\r\n    // Initialize form with either location state or empty values\r\n    const [formData, setFormData] = useState({\r\n        name: \"\",\r\n        location: \"\",\r\n        date: \"\",\r\n        prize: \"\",\r\n        favoritePlayerId: \"\"\r\n    });\r\n\r\n    useEffect(() => {\r\n        const loadTournament = async () => {\r\n            setLoading(true);\r\n            try {\r\n                // Try location state first\r\n                if (location.state?.tournament) {\r\n                    setFormData(location.state.tournament);\r\n                    return;\r\n                }\r\n\r\n                // Fallback to context\r\n                const response = await axios.get(`${API_URL}/${id}`);\r\n                setFormData(response.data);\r\n            } catch (error) {\r\n                console.error(\"Failed to load tournament:\", error);\r\n                setError(error.message);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        loadTournament();\r\n    }, [id, location.state]);\r\n\r\n    if (loading) return <div>Loading tournament data...</div>;\r\n    if (error) return <div>Error loading tournament: {error}</div>;\r\n    if (!formData.id) return <div>Tournament not found</div>;\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        await updateTournament(Number(id), formData, isOnline, serverAvailable);\r\n        navigate(\"/\");\r\n    };\r\n\r\n    // Show loading only if we have no data at all\r\n    if (!formData.name && !location.state?.tournament) {\r\n        return <div>Loading tournament data...</div>;\r\n    }\r\n\r\n    return (\r\n        <div style={{ maxWidth: \"600px\", margin: \"0 auto\", padding: \"20px\" }}>\r\n            <h2>Edit Tournament</h2>\r\n            <form onSubmit={handleSubmit}>\r\n                \r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Name\"\r\n                    name=\"name\"\r\n                    value={formData.name}\r\n                    onChange={handleChange}\r\n                    //required\r\n                />\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Location\"\r\n                    name=\"location\"\r\n                    value={formData.location}\r\n                    onChange={handleChange}\r\n                    //required\r\n                />\r\n                <input\r\n                    type=\"date\"\r\n                    name=\"date\"\r\n                    value={formData.date}\r\n                    onChange={handleChange}\r\n                    //required\r\n                />\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Prize\"\r\n                    name=\"prize\"\r\n                    value={formData.prize}\r\n                    onChange={handleChange}\r\n                    //required\r\n                />\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Favorite Player\"\r\n                    name=\"favoritePlayerId\"\r\n                    value={formData.favoritePlayer}\r\n                    onChange={handleChange}\r\n                />\r\n\r\n                \r\n                <button type=\"submit\">Save Changes</button>\r\n            </form>\r\n        </div>\r\n    );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}