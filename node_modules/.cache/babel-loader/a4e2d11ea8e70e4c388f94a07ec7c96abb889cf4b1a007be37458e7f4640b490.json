{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{getTournaments,deleteTournament}from\"../api.js\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){const[tournaments,setTournaments]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const navigate=useNavigate();useEffect(()=>{const fetchTournaments=async()=>{try{const response=await getTournaments();console.log(\"Fetched:\",response);setTournaments(response.tournaments||[]);}catch(err){console.error(\"Fetch error:\",err);setError(\"Failed to fetch tournaments.\");}finally{setLoading(false);}};fetchTournaments();},[]);const handleView=tournament=>{navigate(\"/edit-tournament/\".concat(tournament.id),{state:{tournament,from:\"home\"}});};const handleDelete=async id=>{const isOnline=navigator.onLine;const serverAvailable=true;const result=await deleteTournament(id,isOnline,serverAvailable);if(result.success||result.queued){setTournaments(prev=>prev.filter(t=>t.id!==id));}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"20px\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Tournaments List\"}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading tournaments...\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:error}),!loading&&tournaments.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"No tournaments available.\"}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:\"none\",padding:0},children:tournaments.map(tournament=>/*#__PURE__*/_jsxs(\"li\",{style:{marginBottom:\"15px\",padding:\"15px\",border:\"1px solid #ddd\",borderRadius:\"5px\",display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:\"0 0 5px 0\"},children:tournament.name}),/*#__PURE__*/_jsxs(\"p\",{style:{margin:\"0\"},children:[tournament.location,\" \\uFFFD \",new Date(tournament.date).toLocaleDateString()]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleView(tournament),style:{padding:\"8px 12px\",backgroundColor:\"#2196F3\",color:\"white\",border:\"none\",borderRadius:\"4px\",cursor:\"pointer\",marginRight:\"10px\"},children:\"View\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(tournament.id),style:{padding:\"8px 12px\",backgroundColor:\"#ff4d4d\",color:\"white\",border:\"none\",borderRadius:\"4px\",cursor:\"pointer\"},children:\"Delete\"})]})]},tournament.id))})]});}","map":{"version":3,"names":["React","useEffect","useState","useNavigate","getTournaments","deleteTournament","jsx","_jsx","jsxs","_jsxs","Home","tournaments","setTournaments","loading","setLoading","error","setError","navigate","fetchTournaments","response","console","log","err","handleView","tournament","concat","id","state","from","handleDelete","isOnline","navigator","onLine","serverAvailable","result","success","queued","prev","filter","t","style","padding","children","color","length","listStyle","map","marginBottom","border","borderRadius","display","justifyContent","alignItems","margin","name","location","Date","date","toLocaleDateString","onClick","backgroundColor","cursor","marginRight"],"sources":["C:/Users/lazab/tennis-tournaments11/tennis-tournaments/client/src/pages/Home.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { getTournaments, deleteTournament } from \"../api.js\";\r\n\r\n\r\nexport default function Home() {\r\n    const [tournaments, setTournaments] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const fetchTournaments = async () => {\r\n            try {\r\n                const response = await getTournaments();\r\n                console.log(\"Fetched:\", response);\r\n                setTournaments(response.tournaments || []);\r\n            } catch (err) {\r\n                console.error(\"Fetch error:\", err);\r\n                setError(\"Failed to fetch tournaments.\");\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchTournaments();\r\n    }, []);\r\n\r\n    const handleView = (tournament) => {\r\n        navigate(`/edit-tournament/${tournament.id}`, {\r\n            state: { tournament, from: \"home\" }\r\n        });\r\n    };\r\n\r\n    const handleDelete = async (id) => {\r\n        const isOnline = navigator.onLine;\r\n        const serverAvailable = true;\r\n\r\n        const result = await deleteTournament(id, isOnline, serverAvailable);\r\n\r\n        if (result.success || result.queued) {\r\n            setTournaments((prev) => prev.filter(t => t.id !== id));\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <div style={{ padding: \"20px\" }}>\r\n            <h1>Tournaments List</h1>\r\n\r\n            {loading && <p>Loading tournaments...</p>}\r\n            {error && <p style={{ color: \"red\" }}>{error}</p>}\r\n            {!loading && tournaments.length === 0 && <p>No tournaments available.</p>}\r\n\r\n            <ul style={{ listStyle: \"none\", padding: 0 }}>\r\n                {tournaments.map((tournament) => (\r\n                    <li key={tournament.id} style={{\r\n                        marginBottom: \"15px\",\r\n                        padding: \"15px\",\r\n                        border: \"1px solid #ddd\",\r\n                        borderRadius: \"5px\",\r\n                        display: \"flex\",\r\n                        justifyContent: \"space-between\",\r\n                        alignItems: \"center\"\r\n                    }}>\r\n                        <div>\r\n                            <h3 style={{ margin: \"0 0 5px 0\" }}>{tournament.name}</h3>\r\n                            <p style={{ margin: \"0\" }}>\r\n                                {tournament.location} ï¿½ {new Date(tournament.date).toLocaleDateString()}\r\n                            </p>\r\n                        </div>\r\n                        <div>\r\n                            <button\r\n                                onClick={() => handleView(tournament)}\r\n                                style={{\r\n                                    padding: \"8px 12px\",\r\n                                    backgroundColor: \"#2196F3\",\r\n                                    color: \"white\",\r\n                                    border: \"none\",\r\n                                    borderRadius: \"4px\",\r\n                                    cursor: \"pointer\",\r\n                                    marginRight: \"10px\"\r\n                                }}\r\n                            >\r\n                                View\r\n                            </button>\r\n                            <button\r\n                                onClick={() => handleDelete(tournament.id)}\r\n                                style={{\r\n                                    padding: \"8px 12px\",\r\n                                    backgroundColor: \"#ff4d4d\",\r\n                                    color: \"white\",\r\n                                    border: \"none\",\r\n                                    borderRadius: \"4px\",\r\n                                    cursor: \"pointer\"\r\n                                }}\r\n                            >\r\n                                Delete\r\n                            </button>\r\n                        </div>\r\n                    </li>\r\n                ))}\r\n            </ul>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}